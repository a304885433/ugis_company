(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e275e"],{"7f92":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline",form:e.form},on:{submit:e.handleSubmit}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"企业名称"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["companyId",{rules:[{required:!0,message:"请选择企业"}]}],expression:"[\n                        'companyId',\n                        {rules: [{ required: true, message: '请选择企业'}]}\n                      ]"}],attrs:{placeholder:"请选择",allowClear:!0},on:{change:e.handleCompanyChange}},e._l(e.companyArr,function(t){return a("a-select-option",{key:t.id,attrs:{value:t.id,chkPointId:t.chkPointIdList}},[e._v(e._s(t.name))])}),1)],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"因子"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["poluTypeId",{rules:[{required:!0,message:"请选择因子"}]}],expression:"[ 'poluTypeId',\n               {rules: [{ required: true, message: '请选择因子'}]}\n             ]"}],attrs:{placeholder:"因子"}},e._l(e.poluTypeArr,function(t){return a("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name))])}),1)],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"排查日期"}},[a("a-form-item",{style:{display:"inline-block",width:"calc(50% - 12px)"}},[a("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["startTime",{rules:[{required:!0,message:"请选择开始时间"}]}],expression:"[\n                 'startTime',\n                 {rules: [{ required: true, message: '请选择开始时间'}]}\n               ]"}],staticStyle:{width:"100%"},attrs:{format:"YYYY-MM-DD"}})],1),a("span",{style:{display:"inline-block",width:"24px",textAlign:"center"}},[e._v("\n              -\n            ")]),a("a-form-item",{style:{display:"inline-block",width:"calc(50% - 12px)"},attrs:{colon:!1}},[a("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["endTime"],expression:"[\n                            'endTime',\n                          ]"}],staticStyle:{width:"100%"},attrs:{format:"YYYY-MM-DD"}})],1)],1)],1),a("a-col",{attrs:{md:24,sm:24}},[a("span",{staticClass:"table-page-search-submitButtons"},[a("a-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.handleQuery}},[e._v("查询")])],1)])],1)],1)],1),a("div",{staticClass:"table-operator"},[a("a-radio-group",{attrs:{value:e.view},on:{change:e.handleViewChange}},[a("a-radio-button",{attrs:{value:"table"}},[e._v("表格")]),a("a-radio-button",{attrs:{value:"chart"}},[e._v("图形")])],1)],1),a("div",[a("a-table",{directives:[{name:"show",rawName:"v-show",value:"table"==e.view,expression:"view=='table'"}],ref:"table",attrs:{size:"default",rowKey:e.newid,dataSource:e.data,pagination:!1,columns:e.columns}}),a("v-chart",{directives:[{name:"show",rawName:"v-show",value:"chart"==e.view,expression:"view=='chart'"}],ref:"chart",attrs:{"force-fit":!0,width:e.width,height:e.height,data:e.dataSource,scale:e.scale,padding:["auto","auto","40","60"]}},[a("v-tooltip"),a("v-axis"),a("v-smooth-line",{attrs:{position:"x*y",size:2}}),a("v-smooth-area",{attrs:{position:"x*y"}})],1)],1)])},i=[],n=(a("7f7f"),a("5176")),s=a.n(n),o=a("c1df"),l=a.n(o),d=a("365c"),c={name:"Report2",components:{},data:function(){return{form:this.$form.createForm(this),columns:[],data:[],poluTypeArr:[],companyArr:[],chkPointArr:[],loading:!1,view:"table",width:100,height:100,dataSource:[],scale:[]}},created:function(){var e=this;d["b"].GetAllItem().then(function(t){e.companyArr=t.result})},methods:{handleSubmit:function(e){e.preventDefault=!0},resetSearchForm:function(){this.queryParam={date:l()(new Date)}},handleQuery:function(){var e=this;this.form.validateFields(function(t,a){t||e.loadData(a)})},exportXls:function(){this.data.length||this.$message.warn("没有需要导出的数据！")},loadData:function(e){var t=this,a=s()({},e);return a.startTime&&(a.startTime=l()(a.startTime).format("YYYY-MM-DD")),a.endTime&&(a.endTime=l()(a.endTime).format("YYYY-MM-DD")),this.loading=!0,d["e"].GetReport2(a).then(function(e){t.columns=e.result.colList.map(function(e){return{dataIndex:e.colId,title:e.name}}),t.data=e.result.data,t.reloadChart()}).catch(function(e){var a=e.response.data;t.$message.error(a.error.message)}).finally(function(){t.loading=!1})},handleCompanyChange:function(e,t){this.getPoluType(e)},getPoluType:function(e){var t=this;d["b"].GetPoluType({id:e}).then(function(e){t.poluTypeArr=e.result})},handleViewChange:function(e){this.view=e.target.value,this.reloadChart()},reloadChart:function(){this.width=Math.max(this.width,500,this.$refs.table.$el.clientWidth),this.height=Math.max(this.height,500,this.$refs.table.$el.clientHeight),"chart"==this.view&&(this.scale=[{dataKey:"x",alias:"时间"},{dataKey:"y",alias:"浓度"}],this.dataSource=this.data.map(function(e){return{x:e.time,y:e.val}}))}}},u=c,h=a("2877"),m=Object(h["a"])(u,r,i,!1,null,null,null);t["default"]=m.exports}}]);
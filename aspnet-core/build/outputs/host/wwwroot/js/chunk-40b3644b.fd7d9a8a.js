(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-40b3644b"],{"022a":function(e,t,a){},1128:function(e,t,a){},"4f5c":function(e,t,a){"use strict";var r=a("022a"),o=a.n(r);o.a},"774e":function(e,t,a){e.exports=a("d2d5")},a21f:function(e,t,a){var r=a("584a"),o=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return o.stringify.apply(o,arguments)}},a755:function(e,t,a){"use strict";var r=a("1128"),o=a.n(r);o.a},c8bb:function(e,t,a){e.exports=a("54a1")},d9ad:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-card",{staticClass:"card",attrs:{title:"基本信息",bordered:!1}},[a("base-info",{ref:"repository",attrs:{showSubmit:!1}})],1),a("a-card",{staticClass:"card",attrs:{title:"排污信息",bordered:!1}},[a("water-info",{ref:"task",attrs:{showSubmit:!1}})],1),a("a-card",{attrs:{title:"排查点位"}},[a("a-table",{attrs:{columns:e.columns,dataSource:e.data,pagination:!1,loading:e.memberLoading},scopedSlots:e._u([e._l(["name","workId","department"],function(t,r){return{key:t,fn:function(o,n){return[n.editable?a("a-input",{key:t,staticStyle:{margin:"-5px 0"},attrs:{value:o,placeholder:e.columns[r].title},on:{change:function(a){return e.handleChange(a.target.value,n.key,t)}}}):[e._v(e._s(o))]]}}}),{key:"operation",fn:function(t,r){return[r.editable?[r.isNew?a("span",[a("a",{on:{click:function(t){return e.saveRow(r)}}},[e._v("添加")]),a("a-divider",{attrs:{type:"vertical"}}),a("a-popconfirm",{attrs:{title:"是否要删除此行？"},on:{confirm:function(t){return e.remove(r.key)}}},[a("a",[e._v("删除")])])],1):a("span",[a("a",{on:{click:function(t){return e.saveRow(r)}}},[e._v("保存")]),a("a-divider",{attrs:{type:"vertical"}}),a("a",{on:{click:function(t){return e.cancel(r.key)}}},[e._v("取消")])],1)]:a("span",[a("a",{on:{click:function(t){return e.toggle(r.key)}}},[e._v("编辑")]),a("a-divider",{attrs:{type:"vertical"}}),a("a-popconfirm",{attrs:{title:"是否要删除此行？"},on:{confirm:function(t){return e.remove(r.key)}}},[a("a",[e._v("删除")])])],1)]}}],null,!0)}),a("a-button",{staticStyle:{width:"100%","margin-top":"16px","margin-bottom":"8px"},attrs:{type:"dashed",icon:"plus"},on:{click:e.newMember}},[e._v("新增")])],1),a("a-card",{attrs:{title:"药品及污染源购置台账"}},[a("a-table",{attrs:{columns:e.yaoColumns,dataSource:e.data,pagination:!1,loading:e.memberLoading},scopedSlots:e._u([e._l(["name","workId","department"],function(t,r){return{key:t,fn:function(o,n){return[n.editable?a("a-input",{key:t,staticStyle:{margin:"-5px 0"},attrs:{value:o,placeholder:e.columns[r].title},on:{change:function(a){return e.handleChange(a.target.value,n.key,t)}}}):[e._v(e._s(o))]]}}}),{key:"operation",fn:function(t,r){return[r.editable?[r.isNew?a("span",[a("a",{on:{click:function(t){return e.saveRow(r)}}},[e._v("添加")]),a("a-divider",{attrs:{type:"vertical"}}),a("a-popconfirm",{attrs:{title:"是否要删除此行？"},on:{confirm:function(t){return e.remove(r.key)}}},[a("a",[e._v("删除")])])],1):a("span",[a("a",{on:{click:function(t){return e.saveRow(r)}}},[e._v("保存")]),a("a-divider",{attrs:{type:"vertical"}}),a("a",{on:{click:function(t){return e.cancel(r.key)}}},[e._v("取消")])],1)]:a("span",[a("a",{on:{click:function(t){return e.toggle(r.key)}}},[e._v("编辑")]),a("a-divider",{attrs:{type:"vertical"}}),a("a-popconfirm",{attrs:{title:"是否要删除此行？"},on:{confirm:function(t){return e.remove(r.key)}}},[a("a",[e._v("删除")])])],1)]}}],null,!0)}),a("a-button",{staticStyle:{width:"100%","margin-top":"16px","margin-bottom":"8px"},attrs:{type:"dashed",icon:"plus"},on:{click:e.newMember}},[e._v("新增")])],1),a("footer-tool-bar",{style:{width:e.isSideMenu()&&e.isDesktop()?"calc(100% - "+(e.sidebarOpened?256:80)+"px)":"100%"}},[a("span",{staticClass:"popover-wrapper"},[a("a-popover",{attrs:{title:"表单校验信息",overlayClassName:"antd-pro-pages-forms-style-errorPopover",trigger:"click",getPopupContainer:function(e){return e.parentNode}}},[a("template",{slot:"content"},e._l(e.errors,function(t){return a("li",{key:t.key,staticClass:"antd-pro-pages-forms-style-errorListItem",on:{click:function(a){return e.scrollToField(t.key)}}},[a("a-icon",{staticClass:"antd-pro-pages-forms-style-errorIcon",attrs:{type:"cross-circle-o"}}),a("div",{},[e._v(e._s(t.message))]),a("div",{staticClass:"antd-pro-pages-forms-style-errorField"},[e._v(e._s(t.fieldLabel))])],1)}),0),e.errors.length>0?a("span",{staticClass:"antd-pro-pages-forms-style-errorIcon"},[a("a-icon",{attrs:{type:"exclamation-circle"}}),e._v(e._s(e.errors.length)+"\n        ")],1):e._e()],2)],1),a("a-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.validate}},[e._v("提交")])],1)],1)},o=[],n=a("a4bb"),s=a.n(n),i=a("cebc"),l=a("5176"),c=a.n(l),u=a("f499"),d=a.n(u),m=(a("ac6a"),a("5df3"),a("a745")),p=a.n(m);function f(e){if(p()(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}var v=a("774e"),h=a.n(v),g=a("c8bb"),w=a.n(g);function y(e){if(w()(Object(e))||"[object Arguments]"===Object.prototype.toString.call(e))return h()(e)}function b(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function k(e){return f(e)||y(e)||b()}var _=a("795b"),x=a.n(_),S=(a("7f7f"),a("e814")),I=a.n(S),N=(a("6b54"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-form",{staticClass:"form",attrs:{form:e.form},on:{submit:e.handleSubmit}},[a("a-form-item",{attrs:{label:"企业名称"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"请输入企业名称",whitespace:!0}]}],expression:"[\n                                  'name',\n                                  {rules: [{ required: true, message: '请输入企业名称', whitespace: true}]}\n                                ]"}],attrs:{placeholder:"请输入企业名称"}})],1),a("a-form-item",{attrs:{label:"企业地址"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["address",{rules:[{required:!0,message:"请输入企业名称",whitespace:!0}]}],expression:"[\n                          'address',\n                          {rules: [{ required: true, message: '请输入企业名称', whitespace: true}]}\n                        ]"}],attrs:{placeholder:"请输入企业地址"}})],1),a("a-row",{attrs:{gutter:8}},[a("a-col",{attrs:{md:12,sm:24}},[a("a-form-item",{attrs:{label:"仓库联系人"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["contact",{rules:[{required:!0,message:"请输入企业联系人",whitespace:!0},{validator:e.validate}]}],expression:"[\n                    'contact',\n                    {rules: [{ required: true, message: '请输入企业联系人', whitespace: true}, {validator: validate}]}\n                  ]"}],attrs:{placeholder:"请输入"}})],1)],1),a("a-col",{attrs:{md:12,sm:24}},[a("a-form-item",{attrs:{label:"联系电话"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["tel",{rules:[{required:!0,message:"请输入企业联系人",whitespace:!0},{validator:e.validate}]}],expression:"[\n             'tel',\n             {rules: [{ required: true, message: '请输入企业联系人', whitespace: true}, {validator: validate}]}\n           ]"}],attrs:{placeholder:"请输入联系电话"}})],1)],1)],1),a("a-form-item",e._b({staticStyle:{"text-align":"left"},attrs:{label:"排污许可证"}},"a-form-item",e.formItemLayout,!1),[a("a-upload",{directives:[{name:"decorator",rawName:"v-decorator",value:["upload",{valuePropName:"fileList",getValueFromEvent:e.normFile}],expression:"['upload', {\nvaluePropName: 'fileList',\ngetValueFromEvent: normFile,\n}]"}],attrs:{name:"logo",action:"/upload.do","list-type":"picture"}},[a("a-button",[a("a-icon",{attrs:{type:"upload"}}),e._v(" 点击上传\n        ")],1)],1)],1),a("a-row",{attrs:{gutter:8}},[a("a-col",{attrs:{xs:24,md:12}},[a("a-form-item",{attrs:{label:"废水类型"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["waterTypeID",{rules:[{required:!0,message:"请选择执行人"}]}],expression:"[\n                    'waterTypeID',\n                    {rules: [{ required: true, message: '请选择执行人'}]}\n                  ]"}],attrs:{placeholder:"请选择废水类型"}},[a("a-select-option",{attrs:{value:"1"}},[e._v("废水1")]),a("a-select-option",{attrs:{value:"2"}},[e._v("废水2")])],1)],1)],1),a("a-col",{attrs:{xs:24,md:12}},[a("a-form-item",{attrs:{label:" 废水月处理量"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["address",{rules:[{required:!0,message:"请输入企业名称",whitespace:!0}]}],expression:"[\n                        'address',\n                        {rules: [{ required: true, message: '请输入企业名称', whitespace: true}]}\n                      ]"}],attrs:{placeholder:"请输入企业地址"}},[a("span",{staticStyle:{width:"10px"},attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("吨\n            ")])])],1)],1)],1),a("a-form-item",e._b({staticStyle:{"text-align":"left"},attrs:{label:"污水处理工艺流程图",extra:""}},"a-form-item",e.formItemLayout,!1),[a("a-upload",{directives:[{name:"decorator",rawName:"v-decorator",value:["upload",{valuePropName:"fileList",getValueFromEvent:e.normFile}],expression:"['upload', {\nvaluePropName: 'fileList',\ngetValueFromEvent: normFile,\n}]"}],attrs:{name:"logo",action:"/upload.do","list-type":"picture"}},[a("a-button",[a("a-icon",{attrs:{type:"upload"}}),e._v(" 点击上传\n        ")],1)],1)],1),a("a-form-item",{attrs:{label:"工艺流程说明（要说明污水分流情况）"}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["address",{rules:[{required:!0,message:"请输入企业名称",whitespace:!0}]}],expression:"[\n                      'address',\n                      {rules: [{ required: true, message: '请输入企业名称', whitespace: true}]}\n                    ]"}],attrs:{placeholder:""}})],1),a("a-form-item",e._b({staticStyle:{"text-align":"left"},attrs:{label:"污水管网图",extra:""}},"a-form-item",e.formItemLayout,!1),[a("a-upload",{directives:[{name:"decorator",rawName:"v-decorator",value:["upload",{valuePropName:"fileList",getValueFromEvent:e.normFile}],expression:"['upload', {\nvaluePropName: 'fileList',\ngetValueFromEvent: normFile,\n}]"}],attrs:{name:"logo",action:"/upload.do","list-type":"picture"}},[a("a-button",[a("a-icon",{attrs:{type:"upload"}}),e._v(" 点击上传\n        ")],1)],1)],1),a("a-form-item",e._b({staticStyle:{"text-align":"left"},attrs:{label:"环境污染险保单复印件",extra:""}},"a-form-item",e.formItemLayout,!1),[a("a-upload",{directives:[{name:"decorator",rawName:"v-decorator",value:["upload",{valuePropName:"fileList",getValueFromEvent:e.normFile}],expression:"['upload', {\nvaluePropName: 'fileList',\ngetValueFromEvent: normFile,\n}]"}],attrs:{name:"logo",action:"/upload.do","list-type":"picture"}},[a("a-button",[a("a-icon",{attrs:{type:"upload"}}),e._v(" 点击上传\n        ")],1)],1)],1),a("a-row",{attrs:{gutter:"8"}},[a("a-col",{attrs:{md:12,xs:24}},[a("a-form-item",{attrs:{label:"环评公司名称",extra:""}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["address",{rules:[{required:!0,message:"请输入企业名称",whitespace:!0}]}],expression:"[\n               'address',\n               {rules: [{ required: true, message: '请输入企业名称', whitespace: true}]}\n             ]"}],attrs:{placeholder:"请输入环评公司名称"}})],1)],1),a("a-col",{attrs:{md:12,xs:24}},[a("a-form-item",{attrs:{label:"企业危险评级"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["waterTypeID",{rules:[{required:!0,message:"请选择执行人"}]}],expression:"[\n                     'waterTypeID',\n                     {rules: [{ required: true, message: '请选择执行人'}]}\n                   ]"}],attrs:{placeholder:"请选择企业危险评级"}},[a("a-select-option",{attrs:{value:"1"}},[e._v("1")]),a("a-select-option",{attrs:{value:"2"}},[e._v("2")]),a("a-select-option",{attrs:{value:"3"}},[e._v("3")]),a("a-select-option",{attrs:{value:"4"}},[e._v("4")]),a("a-select-option",{attrs:{value:"5"}},[e._v("5")]),a("a-select-option",{attrs:{value:"6"}},[e._v("6")])],1)],1)],1)],1),e.showSubmit?a("a-form-item",[a("a-button",{attrs:{htmlType:"submit"}},[e._v("保存")])],1):e._e()],1)}),F=[],q={name:"RepositoryForm",props:{showSubmit:{type:Boolean,default:!1}},data:function(){return{form:this.$form.createForm(this),formItemLayout:{labelCol:{md:2,align:"left",xs:24},wrapperCol:{md:14,offset:2,xs:24}}}},methods:{handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,a){e||t.$notification["error"]({message:"Received values of form:",description:a})})},validate:function(e,t,a){var r=/^user-(.*)$/;r.test(t)||a(new Error("需要以 user- 开头")),a()},normFile:function(e){return console.log("Upload event:",e),p()(e)?e:e&&e.fileList}}},L=q,C=(a("4f5c"),a("2877")),R=Object(C["a"])(L,N,F,!1,null,"fd66665a",null),E=R.exports,T=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-form",{staticClass:"form",attrs:{form:e.form},on:{submit:e.handleSubmit}},[a("a-row",{staticClass:"form-row",attrs:{gutter:16}},[a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"记录日期"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name2",{rules:[{required:!0,message:"请输入任务名称",whitespace:!0}]}],expression:"[ 'name2', {rules: [{ required: true, message: '请输入任务名称', whitespace: true}]} ]"}],attrs:{placeholder:"请输入任务名称"}})],1)],1),a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"污水排放频次(每月)"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name2",{rules:[{required:!0,message:"请输入任务名称",whitespace:!0}]}],expression:"[ 'name2', {rules: [{ required: true, message: '请输入任务名称', whitespace: true}]} ]"}],attrs:{placeholder:"请输入任务名称"}})],1)],1),a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"单次排放量"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["url2",{rules:[{required:!0,message:"请输入任务描述",whitespace:!0}]}],expression:"[ 'url2', {rules: [{ required: true, message: '请输入任务描述', whitespace: true}]} ]"}],attrs:{placeholder:"请输入任务描述"}},[a("span",{staticStyle:{width:"10px"},attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("吨\n          ")])])],1)],1),a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"月排放量"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["url2",{rules:[{required:!0,message:"请输入任务描述",whitespace:!0}]}],expression:"[ 'url2', {rules: [{ required: true, message: '请输入任务描述', whitespace: true}]} ]"}],attrs:{placeholder:"请输入任务描述"}},[a("span",{staticStyle:{width:"10px"},attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("吨\n          ")])])],1)],1)],1),a("a-row",{staticClass:"form-row",attrs:{gutter:16}},[a("a-col",{attrs:{md:12,sm:24}},[a("a-form-item",{attrs:{label:"排放方式"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["approver2",{rules:[{required:!0,message:"请选择责任人"}]}],expression:"[\n            'approver2',\n            {rules: [{ required: true, message: '请选择责任人'}]}\n          ]"}],attrs:{placeholder:"请选择排放方式"}},[a("a-select-option",{attrs:{value:"王伟"}},[e._v("王伟")]),a("a-select-option",{attrs:{value:"李红军"}},[e._v("李红军")])],1)],1)],1),a("a-col",{attrs:{md:12,sm:24}},[a("a-form-item",{attrs:{label:"收集方式"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["approver2",{rules:[{required:!0,message:"请选择责任人"}]}],expression:"[\n     'approver2',\n     {rules: [{ required: true, message: '请选择责任人'}]}\n   ]"}],attrs:{placeholder:"请选择收集方式"}},[a("a-select-option",{attrs:{value:"王伟"}},[e._v("王伟")]),a("a-select-option",{attrs:{value:"李红军"}},[e._v("李红军")])],1)],1)],1)],1),e.showSubmit?a("a-form-item",[a("a-button",{attrs:{htmlType:"submit"}},[e._v("Submit")])],1):e._e()],1)},$=[],O={name:"TaskForm",props:{showSubmit:{type:Boolean,default:!1}},data:function(){return{form:this.$form.createForm(this)}},methods:{handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,a){e||t.$notification["error"]({message:"Received values of form:",description:a})})}}},P=O,A=Object(C["a"])(P,T,$,!1,null,"1b43544d",null),D=A.exports,V=a("5a70"),j=a("ac0d"),B={name:"仓库名",url:"仓库域名",owner:"仓库管理员",approver:"审批人",dateRange:"生效日期",type:"仓库类型",name2:"任务名",url2:"任务描述",owner2:"执行人",approver2:"责任人",dateRange2:"生效日期",type2:"任务类型"},J={name:"AdvancedForm",mixins:[j["b"],j["c"]],components:{FooterToolBar:V["a"],BaseInfo:E,WaterInfo:D},data:function(){return{description:"录入企业相关的所有信息",loading:!1,memberLoading:!1,columns:[{title:"污染因子",dataIndex:"name",key:"name",width:"20%",scopedSlots:{customRender:"name"}},{title:"排放限值(单位）",dataIndex:"workId",key:"workId",width:"20%",scopedSlots:{customRender:"workId"}},{title:"排放标准名称(单位）",dataIndex:"workId",key:"workId",width:"20%",scopedSlots:{customRender:"workId"}},{title:"操作",key:"action",scopedSlots:{customRender:"operation"}}],data:[{key:"1",name:"小明",workId:"001",editable:!1,department:"行政部"},{key:"2",name:"李莉",workId:"002",editable:!1,department:"IT部"},{key:"3",name:"王小帅",workId:"003",editable:!1,department:"财务部"}],errors:[],yaoColumns:[{title:"药品",dataIndex:"name",key:"name",width:"20%",scopedSlots:{customRender:"name"}},{title:"月购置量",dataIndex:"workId",key:"workId",width:"30%",scopedSlots:{customRender:"workId"}},{title:"操作",key:"action",scopedSlots:{customRender:"operation"}}],yaoData:[{name:"药品1"}]}},methods:{handleSubmit:function(e){e.preventDefault()},newMember:function(){var e=this.data.length;this.data.push({key:0===e?"1":(I()(this.data[e-1].key)+1).toString(),name:"",workId:"",department:"",editable:!0,isNew:!0})},remove:function(e){var t=this.data.filter(function(t){return t.key!==e});this.data=t},saveRow:function(e){var t=this;this.memberLoading=!0;var a=e.key,r=e.name,o=e.workId,n=e.department;if(!r||!o||!n)return this.memberLoading=!1,void this.$message.error("请填写完整成员信息。");new x.a(function(e){setTimeout(function(){e({loop:!1})},800)}).then(function(){var e=t.data.filter(function(e){return e.key===a})[0];e.editable=!1,e.isNew=!1,t.memberLoading=!1})},toggle:function(e){var t=this.data.filter(function(t){return t.key===e})[0];t.editable=!t.editable},getRowByKey:function(e,t){var a=this.data;return(t||a).filter(function(t){return t.key===e})[0]},cancel:function(e){var t=this.data.filter(function(t){return t.key===e})[0];t.editable=!1},handleChange:function(e,t,a){var r=k(this.data),o=r.filter(function(e){return t===e.key})[0];o&&(o[a]=e,this.data=r)},validate:function(){var e=this,t=this.$refs,a=t.repository,r=t.task,o=this.$notification,n=new x.a(function(e,t){a.form.validateFields(function(a,r){a?t(a):e(r)})}),s=new x.a(function(e,t){r.form.validateFields(function(a,r){a?t(a):e(r)})});this.errors=[],x.a.all([n,s]).then(function(e){o["error"]({message:"Received values of form:",description:d()(e)})}).catch(function(){var t=c()({},a.form.getFieldsError(),r.form.getFieldsError()),o=Object(i["a"])({},t);e.errorList(o),console.log(o)})},errorList:function(e){if(!e||0===e.length)return null;this.errors=s()(e).map(function(t){return e[t]?{key:t,message:e[t][0],fieldLabel:B[t]}:null})},scrollToField:function(e){var t=document.querySelector('label[for="'.concat(e,'"]'));t&&t.scrollIntoView(!0)}}},M=J,K=(a("a755"),Object(C["a"])(M,r,o,!1,null,"69672f81",null));t["default"]=K.exports},f499:function(e,t,a){e.exports=a("a21f")}}]);
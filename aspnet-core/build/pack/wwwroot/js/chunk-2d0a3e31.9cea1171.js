(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0a3e31"],{"03a9":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline",form:t.form},on:{submit:t.handleSubmit}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"因子"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["poluTypeId",{rules:[{required:!0,message:"请选择因子"}]}],expression:"[\n                  'poluTypeId',\n                  {rules: [{ required: true, message: '请选择因子'}]}\n                ]"}],attrs:{placeholder:"请选择",allowClear:!0}},t._l(t.poluTypeArr,function(e){return a("a-select-option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])}),1)],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"排查日期"}},[a("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["startTime",{rules:[{required:!0,message:"请选择开始时间"}]}],expression:"[\n                      'startTime',\n                      {rules: [{ required: true, message: '请选择开始时间'}]}\n                    ]"}],staticStyle:{width:"100%"},attrs:{format:"YYYY-MM-DD"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"-",colon:!1}},[a("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["endTime"],expression:"[\n                      'endTime',\n                    ]"}],staticStyle:{width:"100%"},attrs:{format:"YYYY-MM-DD"}})],1)],1),a("a-col",{attrs:{md:24,sm:24}},[a("span",{staticClass:"table-page-search-submitButtons"},[a("a-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.handleQuery}},[t._v("查询")]),a("a-button",{staticStyle:{"margin-left":"8px"},on:{click:t.exportXls}},[t._v("导出")])],1)])],1)],1)],1),a("div",{staticClass:"table-operator"},[a("a-radio-group",{attrs:{value:t.view},on:{change:t.handleViewChange}},[a("a-radio-button",{attrs:{value:"table"}},[t._v("表格")]),a("a-radio-button",{attrs:{value:"chart"}},[t._v("图形")])],1)],1),a("div",[a("a-table",{directives:[{name:"show",rawName:"v-show",value:"table"==t.view,expression:"view=='table'"}],ref:"table",attrs:{size:"default",rowKey:t.newid,dataSource:t.data,pagination:!1,columns:t.columns}}),a("v-chart",{directives:[{name:"show",rawName:"v-show",value:"chart"==t.view,expression:"view=='chart'"}],ref:"chart",attrs:{"force-fit":!0,width:t.width,height:t.height,data:t.dataSource,scale:t.scale,padding:["auto","auto","40","60"]}},[a("v-tooltip"),a("v-axis"),a("v-smooth-line",{attrs:{position:"x*y",size:2}}),a("v-smooth-area",{attrs:{position:"x*y"}})],1)],1)])},i=[],s=(a("7f7f"),a("c1df")),o=a.n(s),n=a("365c"),l={name:"Report3",components:{},data:function(){return{form:this.$form.createForm(this),columns:[],data:[],poluTypeArr:[],loading:!1,view:"table",width:100,height:100,dataSource:[],scale:[],colList:null}},created:function(){this.getPoluType()},methods:{handleSubmit:function(t){t.preventDefault=!0},resetSearchForm:function(){this.queryParam={date:o()(new Date)}},handleQuery:function(){var t=this;this.form.validateFields(function(e,a){e||t.loadData(a)})},exportXls:function(){if(this.data.length){var t={colList:this.colList,data:this.data,name:"所有因子统计"};this.download(t)}else this.$message.warn("没有需要导出的数据！")},loadData:function(t){var e=this,a=Object.assign({},t);return a.startTime&&(a.startTime=o()(a.startTime).format("YYYY-MM-DD")),a.endTime&&(a.endTime=o()(a.endTime).format("YYYY-MM-DD")),this.loading=!0,n["e"].GetReport3(a).then(function(t){e.colList=t.result.colList,e.columns=t.result.colList.map(function(t){return{dataIndex:t.colId,title:t.name}}),e.data=t.result.data,e.reloadChart()}).catch(function(t){var a=t.response.data;e.$message.error(a.error.message)}).finally(function(){e.loading=!1})},handleCompanyChange:function(t,e){this.getPoluType(t)},getPoluType:function(){var t=this;n["c"].GetAllItem({typeCode:"yinzixinxi"}).then(function(e){t.poluTypeArr=e.result})},handleViewChange:function(t){this.view=t.target.value,this.reloadChart()},reloadChart:function(){this.width=Math.max(this.width,500,this.$refs.table.$el.clientWidth),this.height=Math.max(this.height,500,this.$refs.table.$el.clientHeight),"chart"==this.view&&(this.scale=[{dataKey:"x",alias:"时间"},{dataKey:"y",alias:"浓度"}],this.dataSource=this.data.map(function(t){return{x:t.name,y:t.val}}))}}},d=l,c=a("2877"),u=Object(c["a"])(d,r,i,!1,null,null,null);e["default"]=u.exports}}]);
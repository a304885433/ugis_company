(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2a827594"],{"6d0a":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-card",{attrs:{bordered:!1}},[n("a-row",{attrs:{gutter:8}},[n("a-col",{attrs:{md:5,sm:24}},[n("s-tree",{attrs:{dataSource:e.dicTypeTree,defaultSelectedKeys:e.defaultSelectedKeys,search:!0,addAction:"create"},on:{click:e.handleClick,add:e.handleAdd,titleClick:e.handleTitleClick}})],1),n("a-col",{attrs:{md:19,sm:24}},[n("s-table",{ref:"table",attrs:{auto:!1,size:"default",columns:e.columns,data:e.loadData,alert:!1,rowSelection:{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange}},scopedSlots:e._u([{key:"action",fn:function(t,a){return n("span",{},[e.$auth("table.update")?[n("a",{directives:[{name:"action",rawName:"v-action:update",arg:"update"}],on:{click:function(t){return e.$refs.modal.edit(a)}}},[e._v("编辑")]),n("a-divider",{attrs:{type:"vertical"}})]:e._e(),n("a-dropdown",[n("a",{staticClass:"ant-dropdown-link"},[e._v("\n              更多\n              "),n("a-icon",{attrs:{type:"down"}})],1),n("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[n("a-menu-item",[n("a",{directives:[{name:"action",rawName:"v-action:delete",arg:"delete"}],on:{click:function(t){return e.handleDelete(a)}}},[e._v("删除")])])],1)],1)],2)}}])})],1)],1),n("dic-modal",{ref:"modal",on:{ok:e.handleSaveOk,close:e.handleSaveClose}})],1)},i=[],o=(n("386d"),n("7f7f"),n("ac6a"),n("1bff")),r=n("2af9"),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-modal",{attrs:{title:"操作",width:600,visible:e.visible,confirmLoading:e.confirmLoading},on:{ok:e.handleOk,cancel:e.handleCancel}},[n("a-spin",{attrs:{spinning:e.confirmLoading}},[n("a-form",{attrs:{form:e.form}},[n("a-form-item",{attrs:{label:e.name}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{}],expression:"['name', {}]"}]})],1),n("a-form-item",{attrs:{label:"排序值"}},[n("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["orderId",{}],expression:"['orderId', {}]"}]})],1)],1)],1)],1)},s=[],l=n("cebc"),d=n("365c"),u={name:"DicModal",data:function(){return{name:"",labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},visible:!1,confirmLoading:!1,mdl:{}}},beforeCreate:function(){this.form=this.$form.createForm(this,{props:["name","typeCode"]})},created:function(){},methods:{setName:function(e){this.name=e+"名称"},add:function(e){this.form.resetFields(),this.edit({typeCode:e})},edit:function(e){var t=this;this.form.resetFields(),this.mdl=Object.assign({},e),this.visible=!0,this.$nextTick(function(){t.form.setFieldsValue(Object(l["a"])({},e))})},close:function(){this.$emit("close"),this.visible=!1},handleOk:function(){var e=this;this.form.validateFields(function(t,n){t||(e.confirmLoading=!0,d["d"].Save(Object.assign(e.mdl,n)).then(function(t){t.success?(e.$message.success("保存成功"),e.$emit("ok"),e.close()):e.$message.error(t.error.message)}).catch(function(){}).finally(function(){e.confirmLoading=!1}))})},handleCancel:function(){this.close()}}},f=u,m=n("2877"),h=Object(m["a"])(f,c,s,!1,null,null,null),p=h.exports,v={name:"DictList",components:{STable:r["e"],STree:o["a"],DicModal:p},data:function(){var e=this;return{defaultSelectedKeys:[],dictType:{},queryParam:{},columns:[{title:"#",dataIndex:"no",width:15,customRender:function(e,t,n){return n+1}},{title:"名称",dataIndex:"name"},{table:"操作",dataIndex:"action",width:"150px",scopedSlots:{customRender:"action"}}],loadData:function(t){return d["d"].GetAll(Object.assign(t,e.queryParam)).then(function(e){return e.result})},dicTypeTree:[],selectedRowKeys:[],selectedRows:[]}},created:function(){var e=this;d["e"].GetAll().then(function(t){var n=t.result.items;e.dicTypeTree=e.getTree(n,null),e.setDicTypeConfig(n),e.handleClick({key:n[0].typeCode})})},methods:{getTree:function(e,t){var n=this;if(!e)return null;var a=e.filter(function(e){return e.parentTypeCode==t});return 0==a.length?null:a.map(function(t){return{key:t.typeCode,title:t.typeName,children:n.getTree(e,t.typeCode)}})},setDicTypeConfig:function(e){var t=this;e.forEach(function(e){t.dictType[e.typeCode]=JSON.parse(e.extensionData)})},handleClick:function(e){if(this.dictType[e.key]){var t=this.dictType[e.key].name;this.columns[1].title="".concat(t,"名称"),this.$refs.modal.setName(t)}this.queryParam={typeCode:e.key,name:e.search},this.$refs.table.refresh(!0)},handleAdd:function(e){this.$refs.modal.add(e.key)},handleTitleClick:function(e){},titleClick:function(e){},handleSaveOk:function(){this.$refs.table.refresh(!0)},handleSaveClose:function(){},handleDelete:function(e){var t=this;this.$confirm({title:"提示",content:"删除数据将不可恢复，是否继续 ?",onOk:function(){d["d"].Delete({id:e.id}).then(function(){t.$refs.table.refresh()}).catch(function(e){})},onCancel:function(){}})},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t}}},y=v,k=(n("7c31"),Object(m["a"])(y,a,i,!1,null,null,null));t["default"]=k.exports},"7c31":function(e,t,n){"use strict";var a=n("9e9c"),i=n.n(a);i.a},"9e9c":function(e,t,n){}}]);